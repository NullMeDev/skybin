<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>System Panel</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: #0a0a0a; color: #e0e0e0; min-height: 100vh; }
        .login-container { display: flex; justify-content: center; align-items: center; min-height: 100vh; }
        .login-box { background: #1a1a1a; padding: 2rem; border-radius: 8px; border: 1px solid #333; width: 100%; max-width: 360px; }
        .login-box h2 { margin-bottom: 1.5rem; color: #00ff88; }
        .login-box input { width: 100%; padding: 12px; margin-bottom: 1rem; background: #0a0a0a; border: 1px solid #333; border-radius: 4px; color: #fff; }
        .login-box button { width: 100%; padding: 12px; background: #00ff88; color: #000; border: none; border-radius: 4px; cursor: pointer; font-weight: 600; }
        .login-box button:hover { background: #00cc6a; }
        .error { color: #ff4444; margin-bottom: 1rem; }
        
        .panel { display: none; padding: 20px; }
        .panel.active { display: block; }
        .header { display: flex; justify-content: space-between; align-items: center; padding: 1rem 2rem; background: #111; border-bottom: 1px solid #333; }
        .header h1 { font-size: 1.2rem; color: #00ff88; }
        .header button { padding: 8px 16px; background: #333; color: #fff; border: none; border-radius: 4px; cursor: pointer; }
        
        .stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin: 2rem; }
        .stat-card { background: #1a1a1a; padding: 1.5rem; border-radius: 8px; border: 1px solid #333; }
        .stat-card h3 { font-size: 2rem; color: #00ff88; }
        .stat-card p { color: #888; margin-top: 0.5rem; }
        
        .section { margin: 2rem; background: #1a1a1a; border-radius: 8px; border: 1px solid #333; }
        .section-header { padding: 1rem 1.5rem; border-bottom: 1px solid #333; display: flex; justify-content: space-between; align-items: center; }
        .section-header h2 { font-size: 1rem; }
        .section-body { padding: 1.5rem; }
        
        .paste-list { display: flex; flex-direction: column; gap: 0.5rem; max-height: 500px; overflow-y: auto; }
        .paste-item { display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: #0a0a0a; border-radius: 4px; border: 1px solid #222; }
        .paste-item:hover { border-color: #444; }
        .paste-item.selected { border-color: #00ff88; background: #0a1a10; }
        .paste-info { flex: 1; }
        .paste-title { font-weight: 500; margin-bottom: 0.25rem; }
        .paste-meta { font-size: 0.8rem; color: #888; }
        .paste-preview { font-size: 0.8rem; color: #666; margin-top: 0.5rem; font-family: monospace; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 500px; }
        .btn-delete { padding: 6px 12px; background: #ff4444; color: #fff; border: none; border-radius: 4px; cursor: pointer; font-size: 0.8rem; }
        .btn-delete:hover { background: #cc3333; }
        .btn-view { padding: 6px 12px; background: #333; color: #fff; border: none; border-radius: 4px; cursor: pointer; font-size: 0.8rem; margin-right: 0.5rem; }
        .bulk-actions { display: none; gap: 0.5rem; align-items: center; padding: 1rem; background: #1a1a1a; border-radius: 4px; margin-bottom: 1rem; }
        .bulk-actions.active { display: flex; }
        .bulk-actions span { color: #00ff88; font-weight: 500; }
        .checkbox { width: 18px; height: 18px; cursor: pointer; accent-color: #00ff88; margin-right: 12px; }
        
        .badge { display: inline-block; padding: 2px 8px; border-radius: 4px; font-size: 0.7rem; margin-left: 0.5rem; }
        .badge-sensitive { background: #ff4444; color: #fff; }
        .badge-source { background: #333; color: #888; }
        
        .pagination { display: flex; gap: 0.5rem; margin-top: 1rem; }
        .pagination button { padding: 8px 16px; background: #333; color: #fff; border: none; border-radius: 4px; cursor: pointer; }
        .pagination button:disabled { opacity: 0.5; cursor: not-allowed; }
        
        .quick-actions { display: flex; gap: 0.5rem; flex-wrap: wrap; }
        .quick-actions button { padding: 8px 16px; background: #222; color: #fff; border: 1px solid #333; border-radius: 4px; cursor: pointer; }
        .quick-actions button:hover { background: #333; }
        .quick-actions button.danger { border-color: #ff4444; color: #ff4444; }
        .quick-actions button.danger:hover { background: #ff4444; color: #fff; }
        
        .toast { position: fixed; bottom: 20px; right: 20px; padding: 12px 24px; background: #00ff88; color: #000; border-radius: 4px; display: none; }
        .toast.error { background: #ff4444; color: #fff; }
        .toast.show { display: block; }
        
        /* Tabs */
        .tabs { display: flex; gap: 0; border-bottom: 1px solid #333; margin: 0 2rem; }
        .tab { padding: 12px 24px; cursor: pointer; color: #888; border-bottom: 2px solid transparent; transition: all 0.2s; }
        .tab:hover { color: #fff; }
        .tab.active { color: #00ff88; border-bottom-color: #00ff88; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        
        /* Analytics Charts */
        .chart-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 1.5rem; margin: 2rem; }
        .chart-card { background: #1a1a1a; border: 1px solid #333; border-radius: 8px; padding: 1.5rem; }
        .chart-card h3 { font-size: 1rem; color: #00ff88; margin-bottom: 1rem; }
        .health-table { width: 100%; border-collapse: collapse; }
        .health-table th, .health-table td { padding: 8px 12px; text-align: left; border-bottom: 1px solid #222; }
        .health-table th { color: #888; font-weight: 500; }
        .health-bar { height: 8px; background: #333; border-radius: 4px; overflow: hidden; }
        .health-bar-fill { height: 100%; border-radius: 4px; transition: width 0.3s; }
        .health-bar-fill.good { background: #00ff88; }
        .health-bar-fill.warn { background: #f59e0b; }
        .health-bar-fill.bad { background: #ff4444; }
        .activity-list { max-height: 400px; overflow-y: auto; }
        .activity-item { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #222; }
        .activity-action { font-weight: 500; }
        .activity-time { color: #888; font-size: 0.85rem; }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div class="login-container" id="login-screen">
        <div class="login-box">
            <h2>üîí Access Required</h2>
            <div class="error" id="login-error" style="display: none;"></div>
            <input type="password" id="password" placeholder="Enter password" autocomplete="off">
            <button onclick="login()">Authenticate</button>
        </div>
    </div>

    <!-- Admin Panel -->
    <div class="panel" id="admin-panel">
        <div class="header">
            <h1>üõ°Ô∏è SkyBin Control Panel</h1>
            <button onclick="logout()">Logout</button>
        </div>

        <!-- Tabs Navigation -->
        <div class="tabs">
            <div class="tab active" onclick="showTab('overview')">üìä Overview</div>
            <div class="tab" onclick="showTab('analytics')">üìà Analytics</div>
            <div class="tab" onclick="showTab('pastes')">üìù Pastes</div>
            <div class="tab" onclick="showTab('activity')">üìã Activity</div>
        </div>

        <!-- Overview Tab -->
        <div id="tab-overview" class="tab-content active">
        <div class="stats" id="stats">
            <div class="stat-card">
                <h3 id="stat-pastes">-</h3>
                <p>Total Pastes</p>
            </div>
            <div class="stat-card">
                <h3 id="stat-comments">-</h3>
                <p>Comments</p>
            </div>
            <div class="stat-card">
                <h3 id="stat-sensitive">-</h3>
                <p>Sensitive</p>
            </div>
        </div>

        <div class="section">
            <div class="section-header">
                <h2>Quick Actions</h2>
            </div>
            <div class="section-body">
                <div class="quick-actions">
                    <button onclick="loadAll()">üîÑ Refresh All</button>
                    <button onclick="loadAnalytics()">üìà Refresh Analytics</button>
                    <button class="danger" onclick="purgeSource('ideone')">üóëÔ∏è Purge Ideone</button>
                    <button class="danger" onclick="purgeSource('codepad')">üóëÔ∏è Purge Codepad</button>
                </div>
            </div>
        </div>
        </div> <!-- End Overview Tab -->

        <!-- Analytics Tab -->
        <div id="tab-analytics" class="tab-content">
            <div class="chart-grid">
                <div class="chart-card">
                    <h3>üè• Source Health (24h)</h3>
                    <table class="health-table" id="source-health-table">
                        <thead>
                            <tr><th>Source</th><th>Success</th><th>Failures</th><th>Pastes</th><th>Health</th></tr>
                        </thead>
                        <tbody id="source-health-body">
                            <tr><td colspan="5" style="color: #888;">Loading...</td></tr>
                        </tbody>
                    </table>
                </div>
                <div class="chart-card">
                    <h3>üìä Source Distribution</h3>
                    <div id="source-breakdown">
                        <p style="color: #888;">Loading...</p>
                    </div>
                </div>
                <div class="chart-card">
                    <h3>üéØ Pattern Hits</h3>
                    <div id="pattern-hits">
                        <p style="color: #888;">Loading...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Pastes Tab -->
        <div id="tab-pastes" class="tab-content">
        <div class="section">
            <div class="section-header">
                <h2>Recent Pastes</h2>
                <button onclick="toggleSelectMode()" style="padding: 6px 12px; background: #333; color: #fff; border: none; border-radius: 4px; cursor: pointer;">‚òëÔ∏è Select Mode</button>
            </div>
            <div class="section-body">
                <div class="bulk-actions" id="bulk-actions">
                    <span id="selected-count">0 selected</span>
                    <button class="danger" onclick="bulkDelete()">üóëÔ∏è Delete Selected</button>
                    <button onclick="selectAll()">Select All</button>
                    <button onclick="deselectAll()">Clear Selection</button>
                </div>
                <div class="paste-list" id="paste-list">
                    Loading...
                </div>
                <div class="pagination">
                    <button id="prev-btn" onclick="prevPage()" disabled>‚Üê Previous</button>
                    <button id="next-btn" onclick="nextPage()">Next ‚Üí</button>
                </div>
            </div>
        </div>
        </div> <!-- End Pastes Tab -->

        <!-- Activity Tab -->
        <div id="tab-activity" class="tab-content">
            <div class="section">
                <div class="section-header">
                    <h2>Activity Summary (24h)</h2>
                </div>
                <div class="section-body">
                    <div id="activity-counts" style="display: flex; gap: 1rem; flex-wrap: wrap; margin-bottom: 1.5rem;">
                        <p style="color: #888;">Loading...</p>
                    </div>
                </div>
            </div>
            <div class="section">
                <div class="section-header">
                    <h2>Recent Activity (Anonymized)</h2>
                </div>
                <div class="section-body">
                    <div class="activity-list" id="activity-list">
                        <p style="color: #888;">Loading...</p>
                    </div>
                </div>
            </div>
        </div> <!-- End Activity Tab -->
    </div>

    <div class="toast" id="toast"></div>

    <script>
        let token = localStorage.getItem('admin_token');
        let currentPage = 0;
        const LIMIT = 25;
        let selectMode = false;
        let selectedPastes = new Set();

        // Check if already logged in
        if (token) {
            verifyAndShow();
        }

        async function login() {
            const password = document.getElementById('password').value;
            const errorEl = document.getElementById('login-error');
            
            try {
                const res = await fetch('/api/x/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ password })
                });
                const data = await res.json();
                
                if (data.success && data.data) {
                    token = data.data.token;
                    localStorage.setItem('admin_token', token);
                    showPanel();
                } else {
                    errorEl.textContent = data.error || 'Invalid credentials';
                    errorEl.style.display = 'block';
                }
            } catch (e) {
                errorEl.textContent = 'Connection error';
                errorEl.style.display = 'block';
            }
        }

        async function verifyAndShow() {
            try {
                const res = await fetch('/api/x/stats', {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                if (res.ok) {
                    showPanel();
                } else {
                    localStorage.removeItem('admin_token');
                    token = null;
                }
            } catch (e) {
                localStorage.removeItem('admin_token');
                token = null;
            }
        }

        function showPanel() {
            document.getElementById('login-screen').style.display = 'none';
            document.getElementById('admin-panel').classList.add('active');
            loadStats();
            loadPastes();
        }

        async function logout() {
            try {
                await fetch('/api/x/logout', {
                    method: 'POST',
                    headers: { 'Authorization': `Bearer ${token}` }
                });
            } catch (e) {}
            localStorage.removeItem('admin_token');
            location.reload();
        }

        async function loadStats() {
            try {
                const res = await fetch('/api/x/stats', {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                const data = await res.json();
                if (data.success) {
                    document.getElementById('stat-pastes').textContent = data.data.total_pastes;
                    document.getElementById('stat-comments').textContent = data.data.total_comments;
                    document.getElementById('stat-sensitive').textContent = data.data.sensitive_pastes;
                }
            } catch (e) {
                showToast('Failed to load stats', true);
            }
        }

        async function loadPastes() {
            const container = document.getElementById('paste-list');
            try {
                const res = await fetch(`/api/x/pastes?limit=${LIMIT}&offset=${currentPage * LIMIT}`, {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                const data = await res.json();
                
                if (data.success && data.data) {
                    if (data.data.length === 0) {
                        container.innerHTML = '<p style="color: #888;">No pastes found</p>';
                    } else {
                        container.innerHTML = data.data.map(p => `
                            <div class="paste-item ${selectedPastes.has(p.id) ? 'selected' : ''}" data-id="${p.id}">
                                ${selectMode ? `<input type="checkbox" class="checkbox" ${selectedPastes.has(p.id) ? 'checked' : ''} onchange="togglePaste('${p.id}', this.checked)">` : ''}
                                <div class="paste-info">
                                    <div class="paste-title">
                                        ${escapeHtml(p.title || 'Untitled')}
                                        ${p.is_sensitive ? '<span class="badge badge-sensitive">Sensitive</span>' : ''}
                                        <span class="badge badge-source">${p.source}</span>
                                    </div>
                                    <div class="paste-meta">Views: ${p.view_count} | ${formatDate(p.created_at)}</div>
                                    <div class="paste-preview">${escapeHtml(p.content_preview)}</div>
                                </div>
                                <div>
                                    <button class="btn-view" onclick="window.open('/paste/${p.id}', '_blank')">View</button>
                                    <button class="btn-delete" onclick="deletePaste('${p.id}')">Delete</button>
                                </div>
                            </div>
                        `).join('');
                    }
                    
                    document.getElementById('prev-btn').disabled = currentPage === 0;
                    document.getElementById('next-btn').disabled = data.data.length < LIMIT;
                }
            } catch (e) {
                container.innerHTML = '<p style="color: #ff4444;">Failed to load pastes</p>';
            }
        }

        async function deletePaste(id) {
            if (!confirm('Delete this paste?')) return;
            try {
                const res = await fetch(`/api/x/paste/${id}`, {
                    method: 'DELETE',
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                const data = await res.json();
                if (data.success) {
                    showToast('Paste deleted');
                    loadPastes();
                    loadStats();
                } else {
                    showToast(data.error || 'Failed to delete', true);
                }
            } catch (e) {
                showToast('Error deleting paste', true);
            }
        }

        async function purgeSource(source) {
            if (!confirm(`Purge ALL pastes from ${source}? This cannot be undone.`)) return;
            try {
                const res = await fetch(`/api/x/source/${source}`, {
                    method: 'DELETE',
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                const data = await res.json();
                if (data.success) {
                    showToast(`Purged ${data.data} pastes from ${source}`);
                    loadPastes();
                    loadStats();
                } else {
                    showToast(data.error || 'Failed to purge', true);
                }
            } catch (e) {
                showToast('Error purging source', true);
            }
        }

        function prevPage() { if (currentPage > 0) { currentPage--; loadPastes(); } }
        function nextPage() { currentPage++; loadPastes(); }

        function formatDate(ts) {
            return new Date(ts * 1000).toLocaleString();
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function showToast(msg, isError = false) {
            const toast = document.getElementById('toast');
            toast.textContent = msg;
            toast.className = `toast show ${isError ? 'error' : ''}`;
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        function toggleSelectMode() {
            selectMode = !selectMode;
            document.getElementById('bulk-actions').classList.toggle('active', selectMode);
            if (!selectMode) {
                selectedPastes.clear();
            }
            loadPastes();
        }

        function togglePaste(id, checked) {
            if (checked) {
                selectedPastes.add(id);
            } else {
                selectedPastes.delete(id);
            }
            document.querySelector(`[data-id="${id}"]`).classList.toggle('selected', checked);
            updateSelectedCount();
        }

        function selectAll() {
            document.querySelectorAll('.paste-item').forEach(item => {
                const id = item.dataset.id;
                selectedPastes.add(id);
                item.classList.add('selected');
                const cb = item.querySelector('.checkbox');
                if (cb) cb.checked = true;
            });
            updateSelectedCount();
        }

        function deselectAll() {
            selectedPastes.clear();
            document.querySelectorAll('.paste-item').forEach(item => {
                item.classList.remove('selected');
                const cb = item.querySelector('.checkbox');
                if (cb) cb.checked = false;
            });
            updateSelectedCount();
        }

        function updateSelectedCount() {
            document.getElementById('selected-count').textContent = `${selectedPastes.size} selected`;
        }

        async function bulkDelete() {
            if (selectedPastes.size === 0) {
                showToast('No pastes selected', true);
                return;
            }
            if (!confirm(`Delete ${selectedPastes.size} selected pastes? This cannot be undone.`)) return;
            
            let deleted = 0;
            let failed = 0;
            
            for (const id of selectedPastes) {
                try {
                    const res = await fetch(`/api/x/paste/${id}`, {
                        method: 'DELETE',
                        headers: { 'Authorization': `Bearer ${token}` }
                    });
                    const data = await res.json();
                    if (data.success) {
                        deleted++;
                    } else {
                        failed++;
                    }
                } catch (e) {
                    failed++;
                }
            }
            
            selectedPastes.clear();
            updateSelectedCount();
            showToast(`Deleted ${deleted} pastes${failed > 0 ? `, ${failed} failed` : ''}`);
            loadPastes();
            loadStats();
        }

        // Tab navigation
        function showTab(tabName) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            event.target.classList.add('active');
            document.getElementById(`tab-${tabName}`).classList.add('active');
            
            if (tabName === 'analytics') loadAnalytics();
            if (tabName === 'activity') loadActivityLogs();
            if (tabName === 'pastes') loadPastes();
        }

        function loadAll() {
            loadStats();
            loadPastes();
            loadAnalytics();
            loadActivityLogs();
            showToast('Refreshed all data');
        }

        // Analytics functions
        async function loadAnalytics() {
            try {
                const res = await fetch('/api/x/analytics', {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                const data = await res.json();
                if (data.success) {
                    renderSourceHealth(data.data.source_health);
                    renderSourceBreakdown(data.data.source_breakdown);
                    renderPatternHits(data.data.pattern_hits);
                }
            } catch (e) {
                showToast('Failed to load analytics', true);
            }
        }

        function renderSourceHealth(health) {
            const tbody = document.getElementById('source-health-body');
            if (!health || health.length === 0) {
                tbody.innerHTML = '<tr><td colspan="5" style="color: #888;">No scraper data yet</td></tr>';
                return;
            }
            tbody.innerHTML = health.map(h => {
                const rate = h.success_rate.toFixed(1);
                const barClass = rate >= 80 ? 'good' : (rate >= 50 ? 'warn' : 'bad');
                return `
                    <tr>
                        <td>${escapeHtml(h.source)}</td>
                        <td style="color: #00ff88;">${h.success_count}</td>
                        <td style="color: #ff4444;">${h.failure_count}</td>
                        <td>${h.pastes_found}</td>
                        <td style="width: 100px;">
                            <div class="health-bar">
                                <div class="health-bar-fill ${barClass}" style="width: ${rate}%;"></div>
                            </div>
                            <span style="font-size: 0.8rem; color: #888;">${rate}%</span>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        function renderSourceBreakdown(breakdown) {
            const container = document.getElementById('source-breakdown');
            if (!breakdown || breakdown.length === 0) {
                container.innerHTML = '<p style="color: #888;">No data</p>';
                return;
            }
            const total = breakdown.reduce((sum, [_, count]) => sum + count, 0);
            container.innerHTML = breakdown.map(([source, count]) => {
                const pct = ((count / total) * 100).toFixed(1);
                return `
                    <div style="display: flex; justify-content: space-between; padding: 4px 0; border-bottom: 1px solid #222;">
                        <span>${escapeHtml(source)}</span>
                        <span style="color: #888;">${count} (${pct}%)</span>
                    </div>
                `;
            }).join('');
        }

        function renderPatternHits(hits) {
            const container = document.getElementById('pattern-hits');
            if (!hits || hits.length === 0) {
                container.innerHTML = '<p style="color: #888;">No pattern hits detected</p>';
                return;
            }
            container.innerHTML = hits.slice(0, 10).map(h => {
                const patterns = h.pattern.replace(/[\[\]"]/g, '').split(',').slice(0, 2).join(', ');
                return `
                    <div style="display: flex; justify-content: space-between; padding: 4px 0; border-bottom: 1px solid #222;">
                        <span style="font-family: monospace; font-size: 0.85rem;">${escapeHtml(patterns)}</span>
                        <span style="color: #00ff88;">${h.count}</span>
                    </div>
                `;
            }).join('');
        }

        // Activity logs
        async function loadActivityLogs() {
            try {
                // Load counts
                const countsRes = await fetch('/api/x/activity/counts', {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                const countsData = await countsRes.json();
                if (countsData.success) {
                    const container = document.getElementById('activity-counts');
                    if (countsData.data.length === 0) {
                        container.innerHTML = '<p style="color: #888;">No activity logged yet</p>';
                    } else {
                        container.innerHTML = countsData.data.map(c => `
                            <div class="stat-card" style="padding: 1rem; min-width: 120px;">
                                <h3 style="font-size: 1.5rem;">${c.count}</h3>
                                <p style="font-size: 0.8rem;">${escapeHtml(c.action)}</p>
                            </div>
                        `).join('');
                    }
                }

                // Load recent logs
                const logsRes = await fetch('/api/x/activity?limit=50', {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                const logsData = await logsRes.json();
                if (logsData.success) {
                    const container = document.getElementById('activity-list');
                    if (logsData.data.length === 0) {
                        container.innerHTML = '<p style="color: #888;">No activity logged yet</p>';
                    } else {
                        container.innerHTML = logsData.data.map(log => `
                            <div class="activity-item">
                                <div>
                                    <span class="activity-action">${escapeHtml(log.action)}</span>
                                    ${log.details ? `<span style="color: #888; margin-left: 8px;">(${escapeHtml(log.details)})</span>` : ''}
                                </div>
                                <span class="activity-time">${formatDate(log.timestamp)}</span>
                            </div>
                        `).join('');
                    }
                }
            } catch (e) {
                showToast('Failed to load activity logs', true);
            }
        }

        // Enter key to login
        document.getElementById('password').addEventListener('keypress', e => {
            if (e.key === 'Enter') login();
        });
    </script>
</body>
</html>
